---
title: Redemption Code Management Module
---

<Callout type="info" title="Feature Description">
The API prefix is uniformly http(s)://`<your-domain>`
</Callout>

    HTTPS should be used in production environments to ensure authentication tokens. HTTP is only recommended for development environments.

    An administrator-specific redemption code system. It supports features such as batch generation, status management, and search filtering. Includes maintenance functions for automatically cleaning up invalid redemption codes. Primarily used for promotional activities and user incentives.

## ğŸ” Administrator Authentication

### Get Redemption Code List

- **Interface Name**: Get Redemption Code List
- **HTTP Method**: GET
- **Path**: `/api/redemption/`
- **Authentication Requirements**: Administrator
- **Feature Description**: Paginate and retrieve list information for all redemption codes in the system

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/?p=1&page_size=20', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": {
    "items": [
      {
        "id": 1,
        "name": "æ–°å¹´æ´»åŠ¨å…‘æ¢ç ",
        "key": "abc123def456",
        "status": 1,
        "quota": 100000,
        "created_time": 1640908800,
        "redeemed_time": 0,
        "expired_time": 1640995200,
        "used_user_id": 0
      }
    ],
    "total": 50,
    "page": 1,
    "page_size": 20
  }
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "è·å–å…‘æ¢ç åˆ—è¡¨å¤±è´¥"
}
```

ğŸ§¾ Field Description:

- `p` (number): Page number, defaults to 1
- `page_size` (number): Number of items per page, defaults to 20
- `items` (array): List of redemption code information
- `total` (number): Total number of redemption codes
- `page` (number): Current page number
- `page_size` (number): Number of items per page

### Search Redemption Codes

- **Interface Name**: Search Redemption Codes
- **HTTP Method**: GET
- **Path**: `/api/redemption/search`
- **Authentication Requirements**: Administrator
- **Feature Description**: Search for redemption codes by keyword, supporting search by ID and name

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/search?keyword=æ–°å¹´&p=1&page_size=20', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": {
    "items": [
      {
        "id": 1,
        "name": "æ–°å¹´æ´»åŠ¨å…‘æ¢ç ",
        "key": "abc123def456",
        "status": 1,
        "quota": 100000
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 20
  }
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "æœç´¢å…‘æ¢ç å¤±è´¥"
}
```

ğŸ§¾ Field Description:

- `keyword` (string): Search keyword, can match redemption code name or ID
- `p` (number): Page number, defaults to 1
- `page_size` (number): Number of items per page, defaults to 20

### Get Single Redemption Code

- **Interface Name**: Get Single Redemption Code
- **HTTP Method**: GET
- **Path**: `/api/redemption/:id`
- **Authentication Requirements**: Administrator
- **Feature Description**: Get detailed information for a specified redemption code

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/123', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": {
    "id": 123,
    "name": "æ–°å¹´æ´»åŠ¨å…‘æ¢ç ",
    "key": "abc123def456",
    "status": 1,
    "quota": 100000,
    "created_time": 1640908800,
    "redeemed_time": 0,
    "expired_time": 1640995200,
    "used_user_id": 0,
    "user_id": 1
  }
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "å…‘æ¢ç ä¸å­˜åœ¨"
}
```

ğŸ§¾ Field Description:

- `id` (number): Redemption code ID, passed via URL path

### Create Redemption Code

- **Interface Name**: Create Redemption Code
- **HTTP Method**: POST
- **Path**: `/api/redemption/`
- **Authentication Requirements**: Administrator
- **Feature Description**: Batch create redemption codes, supporting creation of multiple codes at once

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  },
  body: JSON.stringify({
    name: "æ˜¥èŠ‚æ´»åŠ¨å…‘æ¢ç ",
    count: 10,
    quota: 100000,
    expired_time: 1640995200
  })
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": [
    "abc123def456",
    "def456ghi789",
    "ghi789jkl012"
  ]
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "å…‘æ¢ç åç§°é•¿åº¦å¿…é¡»åœ¨1-20ä¹‹é—´"
}
```

ğŸ§¾ Field Description:

- `name` (string): Redemption code name, length must be between 1-20 characters
- `count` (number): Number of redemption codes to create, must be greater than 0 and not exceed 100
- `quota` (number): Quota amount for each redemption code
- `expired_time` (number): Expiration timestamp, 0 means never expires
- `data` (array): List of successfully created redemption codes

### Update Redemption Code

- **Interface Name**: Update Redemption Code
- **HTTP Method**: PUT
- **Path**: `/api/redemption/`
- **Authentication Requirements**: Administrator
- **Feature Description**: Update redemption code information, supporting status-only updates or full updates

ğŸ’¡ Request Example (Full Update):

```
const response = await fetch('/api/redemption/', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  },
  body: JSON.stringify({
    id: 123,
    name: "æ›´æ–°çš„å…‘æ¢ç åç§°",
    quota: 200000,
    expired_time: 1672531200
  })
});
const data = await response.json();
```

ğŸ’¡ Request Example (Status-Only Update):

```
const response = await fetch('/api/redemption/?status_only=true', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  },
  body: JSON.stringify({
    id: 123,
    status: 2
  })
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": {
    "id": 123,
    "name": "æ›´æ–°çš„å…‘æ¢ç åç§°",
    "status": 1,
    "quota": 200000,
    "expired_time": 1672531200
  }
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "è¿‡æœŸæ—¶é—´ä¸èƒ½æ—©äºå½“å‰æ—¶é—´"
}
```

ğŸ§¾ Field Description:

- `id` (number): Redemption code ID, required
- `status_only` (query parameter): Whether to update status only
- `name` (string): Redemption code name, optional
- `quota` (number): Quota amount, optional
- `expired_time` (number): Expiration timestamp, optional
- `status` (number): Redemption code status, optional

### Delete Invalid Redemption Codes

- **Interface Name**: Delete Invalid Redemption Codes
- **HTTP Method**: DELETE
- **Path**: `/api/redemption/invalid`
- **Authentication Requirements**: Administrator
- **Feature Description**: Batch delete used, disabled, or expired redemption codes

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/invalid', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": "",
  "data": 15
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "åˆ é™¤å¤±è´¥"
}
```

ğŸ§¾ Field Description:

- No request parameters
- `data` (number): Number of redemption codes deleted

### Delete Redemption Code

- **Interface Name**: Delete Redemption Code
- **HTTP Method**: DELETE
- **Path**: `/api/redemption/:id`
- **Authentication Requirements**: Administrator
- **Feature Description**: Delete the specified redemption code

ğŸ’¡ Request Example:

```
const response = await fetch('/api/redemption/123', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… Successful Response Example:

```
{
  "success": true,
  "message": ""
}
```

â— Failed Response Example:

```
{
  "success": false,
  "message": "å…‘æ¢ç ä¸å­˜åœ¨"
}
```

ğŸ§¾ Field Description:

- `id` (number): Redemption code ID, passed via URL path
---
title: よくある質問
---

import { Accordions, Accordion } from 'fumadocs-ui/components/accordion';

## 💰 クォータ関連の質問

<Accordions>
  <Accordion title="クォータとは何ですか？どのように計算されますか？">
    クォータ計算式は以下の通りです。

    ```
    クォータ = グループ倍率 * モデル倍率 * （プロンプトトークン数 + 補完トークン数 * 補完倍率）
    ```

    **補完倍率の説明：**
    - GPT3.5：1.33に固定
    - GPT4：2に固定（公式と一致）

    **注意事項：**
    - 非ストリーミングモードでは、公式APIは消費された総トークンを返しますが、プロンプトと補完の消費倍率は異なります。
    - New API のデフォルト倍率は公式倍率と一致しており、調整済みです。
  </Accordion>

  <Accordion title="アカウントのクォータは十分なのに、クォータ不足と表示されるのはなぜですか？">
    これは、トークンクォータとアカウントクォータが別々であるためです。

    - トークンクォータは最大使用量制限の設定にのみ使用されます。
    - ユーザーはトークンクォータを自由に設定できます。
    - トークンクォータが十分か確認してください。
  </Accordion>
</Accordions>

## 🔧 チャネル設定の問題

<Accordions>
  <Accordion title="チャネルにおける「重み」と「優先度」とは何ですか？">
    重みと優先度は、チャネルの使用順序と割り当てを制御する2つの重要なパラメータです。

    - **優先度（Priority）**：数字が大きいほど優先度が高く、優先度の高いチャネルが優先的に使用されます。
    - **重み（Weight）**：同じ優先度のチャネル内で、重みの比率に応じてリクエストが割り当てられます。

    **例：**
    - 優先度2のチャネルは、優先度1のチャネルよりも優先的に使用されます。
    - 同じ優先度1の2つのチャネルで、重み比が2:1の場合、リクエストは2:1の比率で割り当てられます。
  </Accordion>

  <Accordion title="利用可能なチャネルがありませんと表示されますか？">
    以下の設定を確認してください。

    1. ユーザーグループ設定
    2. チャネルグループ設定
    3. チャネルのモデル設定
  </Accordion>

  <Accordion title="チャネルテストエラー：invalid character '<' looking for beginning of value">
    このエラーは、戻り値が有効なJSONではなく、HTMLページであることを示します。

    最も可能性の高い原因は、デプロイサイトのIPまたはプロキシノードがCloudFlareによってブロックされることです。
  </Accordion>

  <Accordion title="チャネルテストエラー：倍率または価格が設定されていません。管理者に連絡して設定してください。">
    「システム設定 - 運用設定 - モデル倍率設定」で倍率または価格が設定されているか確認してください。

    または、「システム設定 - 運用設定」で「自己利用モード」を有効にしてください。
  </Accordion>
</Accordions>

## 🌐 デプロイと接続の問題

<Accordions>
  <Accordion title="ChatGPT Next Web エラー：Failed to fetch">
    以下の点を確認してください。

    1. デプロイ時に `BASE_URL` を設定しないでください。
    2. APIアドレスとAPIキーが正しく入力されていることを確認してください。
    3. HTTPSが有効になっているか確認してください（ブラウザはHTTPSドメイン下のHTTPリクエストをブロックします）。
  </Accordion>

  <Accordion title="エラー：現在のグループ負荷は飽和状態です。しばらくしてからもう一度お試しください。">
    これは、アップストリームチャネルで429エラー（リクエストが多すぎます）が発生したことを意味します。
  </Accordion>
</Accordions>

## 📦 データベースとアップグレードの問題

<Accordions>
  <Accordion title="アップグレード後、データは失われますか？">
    データベースの種類によって異なります。

    - **MySQL**：データは失われません。
    - **SQLite**：`one-api.db` データベースファイルを永続化するために、デプロイコマンドに従ってボリュームをマウントする必要があります。そうしないと、コンテナ再起動後にデータが失われます。
  </Accordion>

  <Accordion title="アップグレード前にデータベースを変更する必要がありますか？">
    通常は必要ありません。システムは初期化時に自動的に調整します。

    特別な処理が必要な場合は、更新ログで説明され、対応するスクリプトが提供されます。
  </Accordion>

  <Accordion title="データベースを手動で変更した後、エラー：データベースの整合性が破損しています。管理者に連絡してください。">
    このエラーは、`ability` テーブルで無効なチャネルIDレコードが検出されたことを示します。一般的な原因：

    - `channel` テーブルのレコードを削除する際に、`ability` テーブル内の無効なチャネルが同期的にクリーンアップされなかった。
    - 各チャネルがサポートするモデルは、`ability` テーブルに対応するレコードが必要です。
  </Accordion>
</Accordions>

## ❓ お探しの質問が見つかりませんか？

もしここにあなたの質問への回答がない場合は、以下をご利用ください。

1. [インストールとデプロイのドキュメント](/ja/docs/installation) を参照する
2. [GitHubでissueを提出する](/ja/docs/support/feedback-issues)
3. [QQ交流グループに参加して助けを求める](/ja/docs/support/community-interaction)

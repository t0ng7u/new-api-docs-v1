```
---
title: ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
---

<Callout type="info" title="æ©Ÿèƒ½èª¬æ˜">
APIãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ http(s)://`<your-domain>` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã¾ã™ã€‚
</Callout>

    æœ¬ç•ªç’°å¢ƒã§ã¯èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«HTTPSã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚HTTPã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿æ¨å¥¨ã•ã‚Œã¾ã™ã€‚

    ä½¿ç”¨é‡ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆçµ±è¨ˆã‚·ã‚¹ãƒ†ãƒ ã€‚ç®¡ç†è€…ã¯ã‚µã‚¤ãƒˆå…¨ä½“ã®çµ±è¨ˆã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å€‹äººã®çµ±è¨ˆã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ãƒ¢ãƒ‡ãƒ«ã¨æ—¥ä»˜ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã€ã‚°ãƒ©ãƒ•ã‚„ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆã€ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨å‚¾å‘ã®ç›£è¦–ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

## ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

### æ—¥ä»˜åˆ¥å€‹äººä½¿ç”¨é‡çµ±è¨ˆ

- **APIå**ï¼šæ—¥ä»˜åˆ¥å€‹äººä½¿ç”¨é‡çµ±è¨ˆ
- **HTTPãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/data/self`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½¿ç”¨é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥ä»˜åˆ¥ã«çµ±è¨ˆã—ã€æ™‚é–“ç¯„å›²ã‚¯ã‚¨ãƒªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/data/self?start_timestamp=1640908800&end_timestamp=1640995200', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{
  "success": true,
  "message": "",
  "data": [
    {
      "model_name": "gpt-3.5-turbo",
      "count": 25,
      "quota": 12500,
      "token_used": 2000,
      "created_at": 1640995200,
      "user_id": 1,
      "username": "testuser"
    },
    {
      "model_name": "gpt-4",
      "count": 10,
      "quota": 30000,
      "token_used": 1500,
      "created_at": 1640995200,
      "user_id": 1,
      "username": "testuser"
    }
  ]
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{
  "success": false,
  "message": "è·å–ä¸ªäººç»Ÿè®¡æ•°æ®å¤±è´¥"
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `start_timestamp` ï¼ˆæ•°å€¤ï¼‰: é–‹å§‹ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `end_timestamp` ï¼ˆæ•°å€¤ï¼‰: çµ‚äº†ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `data` ï¼ˆé…åˆ—ï¼‰: å€‹äººçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆ
  - `model_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¢ãƒ‡ãƒ«å
  - `count` ï¼ˆæ•°å€¤ï¼‰: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå›æ•°
  - `quota` ï¼ˆæ•°å€¤ï¼‰: ã‚¯ã‚©ãƒ¼ã‚¿æ¶ˆè²»
  - `token_used` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡
  - `created_at` ï¼ˆæ•°å€¤ï¼‰: çµ±è¨ˆæ—¥ä»˜ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  - `user_id` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼å

## ğŸ” ç®¡ç†è€…èªè¨¼

### æ—¥ä»˜åˆ¥ã‚µã‚¤ãƒˆå…¨ä½“ä½¿ç”¨é‡çµ±è¨ˆ

- **APIå**ï¼šæ—¥ä»˜åˆ¥ã‚µã‚¤ãƒˆå…¨ä½“ä½¿ç”¨é‡çµ±è¨ˆ
- **HTTPãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/data/`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚µã‚¤ãƒˆä½¿ç”¨é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥ä»˜åˆ¥ã«çµ±è¨ˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨æ™‚é–“ç¯„å›²ã‚¯ã‚¨ãƒªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/data/?start_timestamp=1640908800&end_timestamp=1640995200&username=testuser', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'your_user_id'
  }
});
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{
  "success": true,
  "message": "",
  "data": [
    {
      "model_name": "gpt-3.5-turbo",
      "count": 150,
      "quota": 75000,
      "token_used": 12500,
      "created_at": 1640995200
    },
    {
      "model_name": "gpt-4",
      "count": 50,
      "quota": 150000,
      "token_used": 8000,
      "created_at": 1640995200
    }
  ]
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{
  "success": false,
  "message": "è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥"
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `start_timestamp` ï¼ˆæ•°å€¤ï¼‰: é–‹å§‹ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `end_timestamp` ï¼ˆæ•°å€¤ï¼‰: çµ‚äº†ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `data` ï¼ˆé…åˆ—ï¼‰: çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆã€ãƒ¢ãƒ‡ãƒ«ã¨æ—¥ä»˜ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œé›†è¨ˆã•ã‚Œã¾ã™ã€‚
  - `model_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¢ãƒ‡ãƒ«å
  - `count` ï¼ˆæ•°å€¤ï¼‰: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå›æ•°ã®åˆè¨ˆ
  - `quota` ï¼ˆæ•°å€¤ï¼‰: ã‚¯ã‚©ãƒ¼ã‚¿æ¶ˆè²»ã®åˆè¨ˆ
  - `token_used` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã®åˆè¨ˆ
  - `created_at` ï¼ˆæ•°å€¤ï¼‰: çµ±è¨ˆæ—¥ä»˜ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
```
---
title: OpenAI チャット形式（Chat Completions）
---

<Callout type="info" title="公式ドキュメント">
  [OpenAI Chat](https://platform.openai.com/docs/api-reference/chat)
</Callout>

## 📝 はじめに

会話を含むメッセージのリストが与えられると、モデルは応答を返します。関連するガイドはOpenAI公式サイトで参照できます：[Chat Completions](https://platform.openai.com/docs/guides/chat)

## 💡 リクエスト例

### 基本的なテキストチャット ✅

```bash
curl https://你的newapi服务器地址/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "gpt-4.1",
    "messages": [
      {
        "role": "developer",
        "content": "你是一个有帮助的助手。"
      },
      {
        "role": "user",
        "content": "你好！"
      }
    ]
  }'
```

**応答例:**

```json
{
  "id": "chatcmpl-B9MBs8CjcvOU2jLn4n570S5qMJKcT",
  "object": "chat.completion",
  "created": 1741569952,
  "model": "gpt-4.1-2025-04-14",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "你好！我能为你提供什么帮助？",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 19,
    "completion_tokens": 10,
    "total_tokens": 29,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default"
}
```

### 画像分析チャット ✅

```bash
curl https://你的newapi服务器地址/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "gpt-4.1",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "这张图片里有什么？"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg"
            }
          }
        ]
      }
    ],
    "max_tokens": 300
  }'
```

**応答例:**

```json
{
  "id": "chatcmpl-B9MHDbslfkBeAs8l4bebGdFOJ6PeG",
  "object": "chat.completion",
  "created": 1741570283,
  "model": "gpt-4.1-2025-04-14",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "画像には、青々とした緑の草地または牧草地を横切る木製の遊歩道が写っています。空は真っ青で、いくつかの雲が点在しており、シーン全体に穏やかで平和な雰囲気を与えています。背景には木々や低木が見えます。",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1117,
    "completion_tokens": 46,
    "total_tokens": 1163,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_fc9f1d7035"
}
```

### ストリーミング応答 ✅

```bash
curl https://你的newapi服务器地址/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "gpt-4.1",
    "messages": [
      {
        "role": "developer",
        "content": "你是一个有帮助的助手。"
      },
      {
        "role": "user",
        "content": "你好！"
      }
    ],
    "stream": true
  }'
```

**ストリーミング応答例:**

```jsonl
{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-4o-mini", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"role":"assistant","content":""},"logprobs":null,"finish_reason":null}]}

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-4o-mini", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"content":"你好"},"logprobs":null,"finish_reason":null}]}

// ... その他のデータチャンク ...

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-4o-mini", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{},"logprobs":null,"finish_reason":"stop"}]}
```

### 関数呼び出し ✅

```bash
curl https://你的newapi服务器地址/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "gpt-4.1",
    "messages": [
      {
        "role": "user",
        "content": "波士顿今天的天气怎么样？"
      }
    ],
    "tools": [
      {
        "type": "function",
        "function": {
          "name": "get_current_weather",
          "description": "获取指定位置的当前天气",
          "parameters": {
            "type": "object",
            "properties": {
              "location": {
                "type": "string",
                "description": "城市和州，例如 San Francisco, CA"
              },
              "unit": {
                "type": "string",
                "enum": ["celsius", "fahrenheit"]
              }
            },
            "required": ["location"]
          }
        }
      }
    ],
    "tool_choice": "auto"
  }'
```

**応答例:**

```json
{
  "id": "chatcmpl-abc123",
  "object": "chat.completion",
  "created": 1699896916,
  "model": "gpt-4o-mini",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "tool_calls": [
          {
            "id": "call_abc123",
            "type": "function",
            "function": {
              "name": "get_current_weather",
              "arguments": "{\n\"location\": \"Boston, MA\"\n}"
            }
          }
        ]
      },
      "logprobs": null,
      "finish_reason": "tool_calls"
    }
  ],
  "usage": {
    "prompt_tokens": 82,
    "completion_tokens": 17,
    "total_tokens": 99,
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  }
}
```

### Logprobs リクエスト ✅

```bash
curl https://你的newapi服务器地址/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "gpt-4.1",
    "messages": [
      {
        "role": "user",
        "content": "你好！"
      }
    ],
    "logprobs": true,
    "top_logprobs": 2
  }'
```

**応答例:**

```json
{
  "id": "chatcmpl-123",
  "object": "chat.completion",
  "created": 1702685778,
  "model": "gpt-4o-mini",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "你好！我能为你提供什么帮助？"
      },
      "logprobs": {
        "content": [
          {
            "token": "Hello",
            "logprob": -0.31725305,
            "bytes": [72, 101, 108, 108, 111],
            "top_logprobs": [
              {
                "token": "Hello",
                "logprob": -0.31725305,
                "bytes": [72, 101, 108, 108, 111]
              },
              {
                "token": "Hi",
                "logprob": -1.3190403,
                "bytes": [72, 105]
              }
            ]
          },
          {
            "token": "!",
            "logprob": -0.02380986,
            "bytes": [33],
            "top_logprobs": [
              {
                "token": "!",
                "logprob": -0.02380986,
                "bytes": [33]
              },
              {
                "token": " there",
                "logprob": -3.787621,
                "bytes": [32, 116, 104, 101, 114, 101]
              }
            ]
          },
          {
            "token": " How",
            "logprob": -0.000054669687,
            "bytes": [32, 72, 111, 119],
            "top_logprobs": [
              {
                "token": " How",
                "logprob": -0.000054669687,
                "bytes": [32, 72, 111, 119]
              },
              {
                "token": "`<|end|>`",
                "logprob": -10.953937,
                "bytes": null
              }
            ]
          },
          {
            "token": " can",
            "logprob": -0.015801601,
            "bytes": [32, 99, 97, 110],
            "top_logprobs": [
              {
                "token": " can",
                "logprob": -0.015801601,
                "bytes": [32, 99, 97, 110]
              },
              {
                "token": " may",
                "logprob": -4.161023,
                "bytes": [32, 109, 97, 121]
              }
            ]
          },
          {
            "token": " I",
            "logprob": -3.7697225e-6,
            "bytes": [32, 73],
            "top_logprobs": [
              {
                "token": " I",
                "logprob": -3.7697225e-6,
                "bytes": [32, 73]
              },
              {
                "token": " assist",
                "logprob": -13.596657,
                "bytes": [32, 97, 115, 115, 105, 115, 116]
              }
            ]
          },
          {
            "token": " assist",
            "logprob": -0.04571125,
            "bytes": [32, 97, 115, 115, 105, 115, 116],
            "top_logprobs": [
              {
                "token": " assist",
                "logprob": -0.04571125,
                "bytes": [32, 97, 115, 115, 105, 115, 116]
              },
              {
                "token": " help",
                "logprob": -3.1089056,
                "bytes": [32, 104, 101, 108, 112]
              }
            ]
          },
          {
            "token": " you",
            "logprob": -5.4385737e-6,
            "bytes": [32, 121, 111, 117],
            "top_logprobs": [
              {
                "token": " you",
                "logprob": -5.4385737e-6,
                "bytes": [32, 121, 111, 117]
              },
              {
                "token": " today",
                "logprob": -12.807695,
                "bytes": [32, 116, 111, 100, 97, 121]
              }
            ]
          },
          {
            "token": " today",
            "logprob": -0.0040071653,
            "bytes": [32, 116, 111, 100, 97, 121],
            "top_logprobs": [
              {
                "token": " today",
                "logprob": -0.0040071653,
                "bytes": [32, 116, 111, 100, 97, 121]
              },
              {
                "token": "?",
                "logprob": -5.5247097,
                "bytes": [63]
              }
            ]
          },
          {
            "token": "?",
            "logprob": -0.0008108172,
            "bytes": [63],
            "top_logprobs": [
              {
                "token": "?",
                "logprob": -0.0008108172,
                "bytes": [63]
              },
              {
                "token": "?\n",
                "logprob": -7.184561,
                "bytes": [63, 10]
              }
            ]
          }
        ]
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 9,
    "completion_tokens": 9,
    "total_tokens": 18,
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "system_fingerprint": null
}
```

## 📮 リクエスト

### エンドポイント

```
POST /v1/chat/completions
```

指定されたチャット会話に対するモデル応答を作成します。詳細については、テキスト生成、ビジョン、およびオーディオのガイドを参照してください。

### 認証方法

APIキー認証のために、リクエストヘッダーに以下を含めます：

```
Authorization: Bearer $NEWAPI_API_KEY
```

ここで `$NEWAPI_API_KEY` はあなたのAPIキーです。OpenAIプラットフォームのAPIキーページでAPIキーを見つけるか、生成することができます。

### リクエストボディパラメータ

#### `messages`

- タイプ：配列
- 必須：はい

これまでの会話を含むメッセージのリスト。使用するモデルに応じて、テキスト、画像、オーディオなど、異なるメッセージタイプ（形式）がサポートされています。

| メッセージタイプ              | 説明                                                                                                                 |
| --------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **Developer message** | 開発者が提供する指示で、ユーザーがどのようなメッセージを送信してもモデルはこれに従うべきです。o1モデル以降では、Developer messageが以前のSystem messageに取って代わります。 |
| **System message**    | 開発者が提供する指示で、ユーザーがどのようなメッセージを送信してもモデルはこれに従うべきです。o1モデル以降では、Developer messageを使用してください。           |
| **User message**      | エンドユーザーによって送信されるメッセージで、プロンプトまたは追加のコンテキスト情報を含みます。                                                                   |
| **Assistant message** | モデルがユーザーメッセージに応答して送信するメッセージ。                                                                                         |
| **Tool message**      | ツールメッセージの内容。                                                                                                     |
| **Function message**  | 非推奨。                                                                                                             |

**Developer message 属性：**

| 属性      | タイプ         | 必須 | 説明                                                       |
| --------- | ------------ | ---- | ---------------------------------------------------------- |
| `role`    | 文字列       | はい   | メッセージ作成者のロールで、ここでは `developer`。                       |
| `content` | 文字列または配列 | はい   | 開発者メッセージの内容。テキストコンテンツ（文字列）またはコンテンツパートの配列にすることができます。 |
| `name`    | 文字列       | いいえ   | 参加者のオプション名。同じロールの参加者を区別するためにモデルに情報を提供します。   |

**System message 属性：**

| 属性      | タイプ         | 必須 | 説明                                                     |
| --------- | ------------ | ---- | -------------------------------------------------------- |
| `role`    | 文字列       | はい   | メッセージ作成者のロールで、ここでは `system`。                        |
| `content` | 文字列または配列 | はい   | システムメッセージの内容。テキストコンテンツ（文字列）またはコンテンツパートの配列にすることができます。 |
| `name`    | 文字列       | いいえ   | 参加者のオプション名。同じロールの参加者を区別するためにモデルに情報を提供します。 |

**User message 属性：**

| 属性      | タイプ         | 必須 | 説明                                                     |
| --------- | ------------ | ---- | -------------------------------------------------------- |
| `role`    | 文字列       | はい   | メッセージ作成者のロールで、ここでは `user`。                          |
| `content` | 文字列または配列 | はい   | ユーザーメッセージの内容。テキストコンテンツ（文字列）またはコンテンツパートの配列にすることができます。 |
| `name`    | 文字列       | いいえ   | 参加者のオプション名。同じロールの参加者を区別するためにモデルに情報を提供します。 |

**コンテンツパートタイプ：**

| コンテンツパートタイプ     | 説明                     | 利用可能       |
| ---------------- | ------------------------ | ------------ |
| **テキストコンテンツパート** | テキスト入力。               | すべてのメッセージタイプ |
| **画像コンテンツパート** | 画像入力。               | ユーザーメッセージ     |
| **オーディオコンテンツパート** | オーディオ入力。               | ユーザーメッセージ     |
| **ファイルコンテンツパート** | テキスト生成用のファイル入力。 | ユーザーメッセージ     |
| **拒否コンテンツパート** | モデルが生成した拒否メッセージ。     | アシスタントメッセージ     |

**テキストコンテンツパート属性：**

| 属性   | タイプ   | 必須 | 説明             |
| ------ | ------ | ---- | ---------------- |
| `text` | 文字列 | はい   | テキストコンテンツ。       |
| `type` | 文字列 | はい   | コンテンツパートのタイプ。 |

**画像コンテンツパート属性：**

| 属性        | タイプ   | 必須 | 説明                                |
| ----------- | ------ | ---- | ----------------------------------- |
| `image_url` | オブジェクト   | はい   | 画像URLまたはbase64エンコードされた画像データを含む。 |
| `type`      | 文字列 | はい   | コンテンツパートのタイプ。                    |

**画像URLオブジェクト属性：**

| 属性     | タイプ   | 必須 | 説明                                |
| -------- | ------ | ---- | ----------------------------------- |
| `url`    | 文字列 | はい   | 画像のURLまたはbase64エンコードされた画像データ。   |
| `detail` | 文字列 | いいえ   | 画像の詳細レベルを指定します。デフォルトは `auto`。 |

**オーディオコンテンツパート属性：**

| 属性          | タイプ   | 必須 | 説明                                   |
| ------------- | ------ | ---- | -------------------------------------- |
| `input_audio` | オブジェクト   | はい   | オーディオデータを含むオブジェクト。                   |
| `type`        | 文字列 | はい   | コンテンツパートのタイプ。常に `input_audio`。 |

**オーディオ入力オブジェクト属性：**

| 属性     | タイプ   | 必須 | 説明                                          |
| -------- | ------ | ---- | --------------------------------------------- |
| `data`   | 文字列 | はい   | base64エンコードされたオーディオデータ。                        |
| `format` | 文字列 | はい   | エンコードされたオーディオデータの形式。現在 "wav" と "mp3" をサポートしています。 |

**ファイルコンテンツパート属性：**

| 属性   | タイプ   | 必須 | 説明                            |
| ------ | ------ | ---- | ------------------------------- |
| `file` | オブジェクト   | はい   | ファイルデータを含むオブジェクト。            |
| `type` | 文字列 | はい   | コンテンツパートのタイプ。常に `file`。 |

**ファイルオブジェクト属性：**

| 属性        | タイプ   | 必須 | 説明                                                   |
| ----------- | ------ | ---- | ------------------------------------------------------ |
| `file_data` | 文字列 | いいえ   | ファイルを文字列としてモデルに渡すためのbase64エンコードされたファイルデータ。 |
| `file_id`   | 文字列 | いいえ   | 入力として使用されるアップロード済みファイルのID。                             |
| `filename`  | 文字列 | いいえ   | ファイルを文字列としてモデルに渡すためのファイル名。               |

**Assistant message 属性：**

| 属性            | タイプ         | 必須 | 説明                                                                     |
| --------------- | ------------ | ---- | ------------------------------------------------------------------------ |
| `role`          | 文字列       | はい   | メッセージ作成者のロールで、ここでは `assistant`。                                     |
| `content`       | 文字列または配列 | いいえ   | アシスタントメッセージの内容。`tool_calls` または `function_call` が指定されていない限り必須。 |
| `name`          | 文字列       | いいえ   | 参加者のオプション名。同じロールの参加者を区別するためにモデルに情報を提供します。                 |
| `audio`         | オブジェクトまたはnull   | いいえ   | モデルの以前のオーディオ応答に関するデータ。                                             |
| `function_call` | オブジェクトまたはnull   | いいえ   | 非推奨。`tool_calls` に置き換えられました。モデルによって生成された、呼び出すべき関数の名前と引数。     |
| `tool_calls`    | 配列         | いいえ   | モデルが生成したツール呼び出し（関数呼び出しなど）。                                         |
| `refusal`       | 文字列またはnull | いいえ   | アシスタントの拒否メッセージ。                                                         |

**Tool message 属性：**

| 属性           | タイプ         | 必須 | 説明                            |
| -------------- | ------------ | ---- | ------------------------------- |
| `role`         | 文字列       | はい   | メッセージ作成者のロールで、ここでは `tool`。 |
| `content`      | 文字列または配列 | はい   | ツールメッセージの内容。                |
| `tool_call_id` | 文字列       | はい   | このメッセージが応答するツール呼び出し。          |

**Function message 属性：（非推奨）**

| 属性      | タイプ         | 必須 | 説明                                |
| --------- | ------------ | ---- | ----------------------------------- |
| `role`    | 文字列       | はい   | メッセージ作成者のロールで、ここでは `function`。 |
| `content` | 文字列またはnull | はい   | 関数メッセージの内容。                    |
| `name`    | 文字列       | はい   | 呼び出す関数の名前。                |

#### `model`

- タイプ：文字列
- 必須：はい

使用するモデルID。Chat APIにどのモデルが適用されるかの詳細については、モデルエンドポイント互換性表を参照してください。

#### `store`

- タイプ：ブール値またはnull
- 必須：いいえ
- デフォルト値：false

このチャット補完リクエストの出力を、当社のモデル蒸留または評価製品のために保存するかどうか。

#### `reasoning_effort`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：medium
- oシリーズのモデルにのみ適用

推論モデルの推論作業を制約します。現在サポートされている値は `low`、`medium`、`high` です。推論作業を減らすと、応答速度が向上し、応答で推論に使用されるトークン数が減少します。

#### `metadata`

- タイプ：マップ
- 必須：いいえ

オブジェクトに添付できる16個のキーと値のペアのコレクション。これは、構造化された形式でオブジェクトの追加情報を保存するのに役立ち、APIまたはダッシュボードを通じてオブジェクトをクエリできます。

キーは最大長64文字の文字列です。値は最大長512文字の文字列です。

#### `modalities`

- タイプ：配列またはnull
- 必須：いいえ

このリクエストに対してモデルに生成させたい出力タイプ。ほとんどのモデルはテキストを生成でき、これがデフォルト設定です：
["text"]

このモデルはオーディオの生成にも使用できます。このモデルにテキストとオーディオの両方の応答を同時に生成させるには、以下を使用できます：
["text", "audio"]

#### `prediction`

- タイプ：オブジェクト
- 必須：いいえ

予測出力の設定。モデル応答の大部分が事前に分かっている場合に、応答時間を大幅に改善できます。これは、ファイルにわずかな変更を加える場合に最も一般的です。

**可能なタイプ：**

| タイプ         | 説明                                                             |
| ------------ | ---------------------------------------------------------------- |
| **静的コンテンツ** | 静的な予測出力コンテンツ。例えば、わずかな変更を加えて再生成されているテキストファイルの内容など。 |

**静的コンテンツ属性：**

| 属性      | タイプ         | 必須 | 説明                                                                                   |
| --------- | ------------ | ---- | -------------------------------------------------------------------------------------- |
| `content` | 文字列または配列 | はい   | モデル応答を生成する際に一致すべきコンテンツ。生成されたトークンがこのコンテンツと一致する場合、モデル応答全体がより速く返される可能性があります。 |
| `type`    | 文字列       | はい   | 提供される予測コンテンツタイプ。現在のタイプは常に `content`。                                       |

**コンテンツの可能なタイプ：**

1.  **テキストコンテンツ（文字列）** - 予測出力に使用されるコンテンツ。これは通常、わずかな変更を加えている再生成中のファイルのテキストです。

2.  **コンテンツパート配列（配列）** - 定義されたタイプを持つコンテンツパートの配列。サポートされるオプションは、応答の生成に使用されるモデルによって異なります。テキスト入力を含めることができます。

**コンテンツパート配列属性：**

| 属性   | タイプ   | 必須 | 説明             |
| ------ | ------ | ---- | ---------------- |
| `text` | 文字列 | はい   | テキストコンテンツ。       |
| `type` | 文字列 | はい   | コンテンツパートのタイプ。 |

#### `audio`

- タイプ：オブジェクトまたはnull
- 必須：いいえ

オーディオ出力のパラメータ。`modalities: ["audio"]` を使用してオーディオ出力をリクエストする場合に必要です。

| 属性     | タイプ   | 必須 | 説明                                                                                                      |
| -------- | ------ | ---- | --------------------------------------------------------------------------------------------------------- |
| `format` | 文字列 | はい   | 出力オーディオ形式を指定します。wav、mp3、flac、opus、または pcm16 のいずれかである必要があります。          |
| `voice`  | 文字列 | はい   | モデルが応答に使用する音声。サポートされている音声は、alloy、ash、ballad、coral、echo、fable、nova、onyx、sage、および shimmer です。 |

#### `temperature`

- タイプ：数値またはnull
- 必須：いいえ
- デフォルト値：1

使用するサンプリング温度で、0から2の間。高い値（例：0.8）は出力をよりランダムにし、低い値（例：0.2）はより集中して決定論的にします。通常、この値または `top_p` のいずれかを変更することをお勧めしますが、両方を同時に変更しないでください。

#### `top_p`

- タイプ：数値またはnull
- 必須：いいえ
- デフォルト値：1

核サンプリングと呼ばれる、サンプリング温度の代替方法で、モデルはtop_p確率質量を持つトークン結果を考慮します。したがって、0.1は、上位10%の確率質量を含むトークンのみを考慮することを意味します。

通常、この値または `temperature` のいずれかを変更することをお勧めしますが、両方を同時に変更しないでください。

#### `n`

- タイプ：整数またはnull
- 必須：いいえ
- デフォルト値：1

各入力メッセージに対して生成するチャット補完の選択肢の数。すべての選択肢で生成されたトークン数に基づいて課金されることに注意してください。`n` を1に保つことで、コストを最小限に抑えることができます。

#### `stop`

- タイプ：文字列/配列/null
- 必須：いいえ
- デフォルト値：null
- 最新の推論モデルおよび .o3、o4-mini はサポートされていません

APIがそれ以上のトークンの生成を停止する最大4つのシーケンス。返されるテキストには停止シーケンスは含まれません。

#### `max_tokens`

- タイプ：整数またはnull
- 必須：いいえ

チャット補完で生成できる最大トークン数。この値は、APIを通じて生成されるテキストのコストを制御するために使用できます。

この値は現在非推奨であり、`max_completion_tokens` に置き換えられ、`o1` シリーズモデルとは互換性がありません。

#### `max_completion_tokens`

- タイプ：整数またはnull
- 必須：いいえ

補完で生成できるトークン数の上限。これには、可視出力トークンと推論トークンが含まれます。

#### `presence_penalty`

- タイプ：数値またはnull
- 必須：いいえ
- デフォルト値：0

-2.0から2.0までの数値。正の値は、新しいトークンがこれまでにテキストに現れた回数に基づいてペナルティを与え、モデルが新しいトピックについて議論する可能性を高めます。

#### `frequency_penalty`

- タイプ：数値またはnull
- 必須：いいえ
- デフォルト値：0

-2.0から2.0までの数値。正の値は、新しいトークンがこれまでにテキストに現れた頻度に基づいてペナルティを与え、モデルが同じ行を逐語的に繰り返す可能性を低くします。

#### `logit_bias`

- タイプ：マップ
- 必須：いいえ
- デフォルト値：null

指定されたトークンが補完に出現する可能性を変更します。

トークン（トークナイザーのトークンIDで指定）を-100から100までの関連バイアス値にマッピングするJSONオブジェクトを受け入れます。数学的には、バイアスはモデルがサンプリング前に生成するロジットに追加されます。正確な効果はモデルによって異なりますが、-1から1の間の値は選択の可能性を減少または増加させるはずです。-100や100のような値は、関連するトークンが禁止されるか、排他的に選択されるようにするはずです。

#### `logprobs`

- タイプ：ブール値またはnull
- 必須：いいえ
- デフォルト値：false

出力トークンの対数確率を返すかどうか。trueの場合、`message.content` 内の各出力トークンの対数確率が返されます。

#### `user`

- タイプ：文字列
- 必須：いいえ

エンドユーザーを表す一意の識別子で、OpenAIが不正行為を監視および検出するのに役立ちます。[詳細はこちら](https://platform.openai.com/docs/guides/safety-best-practices/end-user-ids)。

#### `service_tier`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：auto

リクエストの処理に使用されるレイテンシーティアを指定します。このパラメータは、スケールティアサービスを購読しているお客様に関連します：

- 'auto' に設定され、プロジェクトでスケールティアが有効になっている場合、システムはスケールティアのクレジットを使い果たすまで使用します。
- 'auto' に設定され、プロジェクトでスケールティアが有効になっていない場合、リクエストはデフォルトのサービスティアで処理され、稼働時間SLAが低く、遅延保証はありません。
- 'default' に設定されている場合、リクエストはデフォルトのサービスティアで処理され、稼働時間SLAが低く、遅延保証はありません。
- 'flex' に設定されている場合、リクエストはFlex Processingサービスティアで処理されます。詳細についてはドキュメントを参照してください。
- 設定されていない場合、デフォルトの動作は 'auto' です。
- このパラメータが設定されている場合、応答ボディには使用された service_tier が含まれます。

#### `stream_options`

- タイプ：オブジェクトまたはnull
- 必須：いいえ
- デフォルト値：null

ストリーミング応答のオプション。`stream: true` が設定されている場合にのみ使用されます。

**可能な属性：**

| 属性            | タイプ   | 必須 | 説明                                                                                                                                                                                                                                                  |
| --------------- | ------ | ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `include_usage` | ブール値 | いいえ   | 設定されている場合、data: [DONE] メッセージの前に追加のチャンクがストリーミングされます。このチャンクの usage フィールドには、リクエスト全体のトークン使用統計が表示され、choices フィールドは常に空の配列になります。他のすべてのチャンクにも usage フィールドが含まれますが、値はnullです。注：ストリームが中断された場合、リクエストの合計トークン使用量を含む最終的な使用チャンクを受け取れない可能性があります。 |

#### `response_format`

- タイプ：オブジェクト
- 必須：いいえ

モデルが出力しなければならない形式を指定します。

- `{ "type": "json_schema", "json_schema": {...} }` に設定すると、構造化出力が有効になり、モデルが提供されたJSONスキーマに一致することが保証されます。
- `{ "type": "json_object" }` に設定すると、JSONモードが有効になり、モデルが生成するメッセージが有効なJSONであることが保証されます。

重要：JSONモードを使用する場合、システムメッセージまたはユーザーメッセージを通じて、モデルにJSONを生成するように指示する必要があります。そうしないと、モデルはトークン制限に達するまで無限の空白を生成する可能性があります。

**可能なタイプ：**

| タイプ            | 説明                                                                                      |
| --------------- | ----------------------------------------------------------------------------------------- |
| **text**        | デフォルトの応答形式。テキスト応答の生成に使用されます。                                                          |
| **json_schema** | JSONスキーマ応答形式。構造化されたJSON応答の生成に使用されます。構造化出力の詳細については、こちらをご覧ください。            |
| **json_object** | JSONオブジェクト応答形式。JSON応答を生成する古い方法。サポートされているモデルでは、json_schemaの使用が推奨されます。 |

**text 属性：**

| 属性   | タイプ   | 必須 | 説明                                    |
| ------ | ------ | ---- | --------------------------------------- |
| `type` | 文字列 | はい   | 定義されている応答形式のタイプ。常に `text`。 |

**json_schema 属性：**

| 属性          | タイプ   | 必須 | 説明                                           |
| ------------- | ------ | ---- | ---------------------------------------------- |
| `json_schema` | オブジェクト   | はい   | JSONスキーマを含む構造化出力設定オプション。         |
| `type`        | 文字列 | はい   | 定義されている応答形式のタイプ。常に `json_schema`。 |

**json_schema.json_schema 属性：**

| 属性          | タイプ          | 必須 | 説明                                                                                                                                          |
| ------------- | ------------- | ---- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | 文字列        | はい   | 応答形式の名前。a-z、A-Z、0-9、またはアンダースコアとハイフンを含み、最大長は64である必要があります。                                                                    |
| `description` | 文字列        | いいえ   | 応答形式の目的を説明するもので、モデルはこれを使用してその形式でどのように応答するかを決定します。                                                                                          |
| `schema`      | オブジェクト          | いいえ   | JSONスキーマオブジェクトとして記述された応答形式のスキーマ。                                                                                                     |
| `strict`      | ブール値またはnull | いいえ   | 出力生成時に厳密なスキーマ遵守を有効にするかどうか。trueに設定されている場合、モデルは常にschemaフィールドで定義された正確なスキーマに従います。strictがtrueの場合、JSONスキーマのサブセットのみがサポートされます。 |

**json_object 属性：**

| 属性   | タイプ   | 必須 | 説明                                           |
| ------ | ------ | ---- | ---------------------------------------------- |
| `type` | 文字列 | はい   | 定義されている応答形式のタイプ。常に `json_object`。 |

#### `seed`

- タイプ：整数またはnull
- 必須：いいえ
  ベータ機能。指定された場合、当社のシステムは決定論的サンプリングを行うために最大限の努力をします。これにより、同じシードとパラメータを持つ繰り返しのリクエストは同じ結果を返すはずです。決定論性は保証されません。バックエンドの変更を監視するには、応答パラメータの system_fingerprint を参照してください。

#### `tools`

- タイプ：配列
- 必須：いいえ

モデルが呼び出す可能性のあるツールのリスト。現在、関数のみがツールとしてサポートされています。このパラメータを使用して、モデルがJSON入力を生成する可能性のある関数のリストを提供します。最大128個の関数がサポートされています。

**属性：**

| 属性       | タイプ   | 必須 | 説明                                |
| ---------- | ------ | ---- | ----------------------------------- |
| `function` | オブジェクト   | はい   | 呼び出す関数情報                    |
| `type`     | 文字列 | はい   | ツールのタイプ。現在、functionのみがサポートされています。 |

**function 属性：**

| 属性          | タイプ          | 必須 | 説明                                                                                                                                                                                                       |
| ------------- | ------------- | ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | 文字列        | はい   | 呼び出す関数名。a-z、A-Z、0-9、またはアンダースコアとハイフンを含み、最大長は64である必要があります。                                                                                                                                |
| `description` | 文字列        | いいえ   | 関数の機能の説明。モデルはこれを使用して、いつどのように関数を呼び出すかを選択します。                                                                                                                                                       |
| `parameters`  | オブジェクト          | いいえ   | 関数が受け入れるパラメータ。JSONスキーマオブジェクトとして記述されます。例についてはガイドを、フォーマットドキュメントについてはJSONスキーマ参照を参照してください。parametersを省略すると、空のパラメータリストを持つ関数が定義されます。                                                                       |
| `strict`      | ブール値またはnull | いいえ   | デフォルト値：false。関数呼び出しの生成時に厳密なスキーマ遵守を有効にするかどうか。trueに設定されている場合、モデルはparametersフィールドで定義された正確なスキーマに従います。strictがtrueの場合、JSONスキーマのサブセットのみがサポートされます。詳細については、関数呼び出しガイドの構造化出力セクションを参照してください。 |

#### `functions`

- タイプ：配列
- 必須：いいえ
- 注意：非推奨、`tools` の使用を推奨

モデルがJSON入力を生成する可能性のある関数のリスト。

| 属性          | タイプ   | 必須 | 説明                                                                            |
| ------------- | ------ | ---- | ------------------------------------------------------------------------------- |
| `name`        | 文字列 | はい   | 呼び出す関数名。a-z、A-Z、0-9、またはアンダースコアとハイフンを含み、最大長は64である必要があります。     |
| `description` | 文字列 | いいえ   | 関数の機能の説明。モデルはこれを使用して、いつどのように関数を呼び出すかを選択します。                            |
| `parameters`  | オブジェクト   | いいえ   | 関数が受け入れるパラメータ。JSONスキーマオブジェクトとして記述されます。parametersを省略すると、空のパラメータリストを持つ関数が定義されます。 |

#### `tool_choice`

- タイプ：文字列またはオブジェクト
- 必須：いいえ

モデルがどのツールを呼び出すか（もしあれば）を制御します：

- `none`：モデルはどのツールも呼び出さず、メッセージを生成します。
- `auto`：モデルはメッセージを生成するか、1つ以上のツールを呼び出すかを選択できます。
- `required`：モデルは1つ以上のツールを呼び出す必要があります。
- `{"type": "function", "function": {"name": "my_function"}}`：モデルに特定のツールを強制的に呼び出させます。

ツールがない場合は `none` がデフォルトで、ツールがある場合は `auto` がデフォルトです。

**可能なタイプ：**

| タイプ       | 説明                                                                                                                                            |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| **文字列** | noneは、モデルがどのツールも呼び出さず、メッセージを生成することを意味します。autoは、モデルがメッセージを生成するか、1つ以上のツールを呼び出すかを選択できることを意味します。requiredは、モデルが1つ以上のツールを呼び出す必要があることを意味します。 |
| **オブジェクト**   | モデルが使用すべきツールを指定します。モデルに特定の関数を強制的に呼び出させるために使用されます。                                                                                                |

**オブジェクト属性：**

| 属性       | タイプ   | 必須 | 説明                                |
| ---------- | ------ | ---- | ----------------------------------- |
| `function` | オブジェクト   | はい   | 関数情報を含むオブジェクト                  |
| `type`     | 文字列 | はい   | ツールのタイプ。現在、functionのみがサポートされています。 |

**function 属性：**

| 属性   | タイプ   | 必須 | 説明               |
| ------ | ------ | ---- | ------------------ |
| `name` | 文字列 | はい   | 呼び出す関数名。 |

#### `function_call`

- タイプ：文字列またはオブジェクト
- 必須：いいえ
- デフォルト値：関数がない場合は `none`、関数がある場合は `auto`
- 注意：非推奨、`tool_choice` の使用を推奨

モデルがどの関数を呼び出すか（もしあれば）を制御します：

- `none`：モデルは関数を呼び出さず、メッセージを生成します。
- `auto`：モデルはメッセージを生成するか、関数を呼び出すかを選択できます。
- `{"name": "my_function"}`：モデルに特定の関数を強制的に呼び出させます。

**オブジェクトタイプ属性：**

| 属性   | タイプ   | 必須 | 説明               |
| ------ | ------ | ---- | ------------------ |
| `name` | 文字列 | はい   | 呼び出す関数名。 |

#### `parallel_tool_calls`

- タイプ：ブール値
- 必須：いいえ
- デフォルト値：true

ツール使用中に並列関数呼び出しを有効にするかどうか。

#### `stream`

- タイプ：ブール値またはnull
- 必須：いいえ
- デフォルト値：false

trueに設定されている場合、モデル応答データは、生成時にサーバー送信イベントを通じてクライアントにストリーミングされます。詳細については、以下のストリーミング応答セクションを、ストリーミングイベントの処理方法についてはストリーミング応答ガイドを参照してください。

#### `top_logprobs`

- タイプ：整数またはnull
- 必須：いいえ

0から20までの整数で、各トークン位置で返される最も可能性の高いトークンの数を指定します。各トークンには関連する対数確率があります。このパラメータを使用する場合、`logprobs` をtrueに設定する必要があります。

#### `web_search_options`

- タイプ：オブジェクト
- 必須：いいえ

このツールは、応答に関連する結果を得るためにウェブを検索します。ウェブ検索ツールの詳細については、こちらをご覧ください。

**可能な属性：**

| 属性                  | タイプ        | 必須 | 説明                                                                                                  |
| --------------------- | ----------- | ---- | ----------------------------------------------------------------------------------------------------- |
| `search_context_size` | 文字列      | いいえ   | デフォルト値：medium。検索に使用されるコンテキストウィンドウのスペース量に関する高レベルのガイダンス。オプションの値はlow、medium、またはhighです。mediumがデフォルト値です。 |
| `user_location`       | オブジェクトまたはnull | いいえ   | 検索の近似位置パラメータ。                                                                                  |

**user_location 属性：**

| 属性          | タイプ | 必須 | 説明                 |
| ------------- | ---- | ---- | -------------------- |
| `approximate` | オブジェクト | はい   | 検索の近似位置パラメータ。 |

**approximate 属性：**

| 属性       | タイプ   | 必須 | 説明                                         |
| ---------- | ------ | ---- | -------------------------------------------- |
| `city`     | 文字列 | いいえ   | ユーザーの都市の自由形式テキスト入力。例：San Francisco。 |
| `country`  | 文字列 | いいえ   | ユーザーの2文字ISO国コード。例：US。         |
| `region`   | 文字列 | いいえ   | ユーザーの地域の自由形式テキスト入力。例：California。    |
| `timezone` | 文字列 | いいえ   | ユーザーのIANAタイムゾーン。例：America/Los_Angeles。 |
| `type`     | 文字列 | はい   | 位置近似タイプ。常に approximate。           |

## 📥 応答

### チャット補完オブジェクト

チャット補完オブジェクトを返します。リクエストがストリーミングされた場合は、チャット補完チャンクオブジェクトのストリーミングシーケンスを返します。

#### `id`

- タイプ：文字列
- 説明：応答の一意の識別子

#### `object`

- タイプ：文字列
- 説明：オブジェクトタイプ、値は "chat.completion"

#### `created`

- タイプ：整数
- 説明：応答作成タイムスタンプ

#### `model`

- タイプ：文字列
- 説明：使用されたモデル名

#### `system_fingerprint`

- タイプ：文字列
- 説明：システムフィンガープリント識別子。モデルが実行されているバックエンド構成を示します。決定論性に影響を与える可能性のあるバックエンドの変更がいつ行われたかを理解するために、seedリクエストパラメータと一緒に使用できます。

#### `choices`

- タイプ：配列
- 説明：生成された応答オプションのリストを含みます。nが1より大きい場合、複数のオプションが存在する可能性があります。
- 属性:
  - `index`: オプションリスト内のオプションのインデックス。
  - `message`: モデルが生成したチャット補完メッセージ。
    - `role`: メッセージ作成者のロール。
    - `content`: メッセージの内容。nullの場合があります。
    - `refusal`: モデルが生成した拒否メッセージ。nullの場合があります。
    - `annotations`: メッセージの注釈。適用される場合に提供されます（例：ウェブ検索ツール使用時）。
      - `type`: 注釈タイプ。URL参照の場合、常に "url_citation"。
      - `url_citation`: ウェブ検索時のURL参照。
        - `start_index`: メッセージ内のURL参照の最初の文字のインデックス。
        - `end_index`: メッセージ内のURL参照の最後の文字のインデックス。
        - `url`: ウェブリソースのURL。
        - `title`: ウェブリソースのタイトル。
    - `audio`: オーディオ出力モダリティがリクエストされた場合、このオブジェクトにはモデルからのオーディオ応答のデータが含まれます。
      - `data`: モデルが生成したBase64エンコードされたオーディオバイト。形式はリクエストで指定されます。
      - `id`: このオーディオ応答の一意の識別子。
      - `transcript`: モデルが生成したオーディオのトランスクリプト。
      - `expires_at`: このオーディオ応答がサーバー上で複数ターン会話に利用可能であるUnixタイムスタンプ（秒）。
    - `function_call`: （非推奨）モデルによって生成された、呼び出すべき関数の名前と引数。`tool_calls` に置き換えられました。
      - `name`: 呼び出す関数の名前。
      - `arguments`: モデルによってJSON形式で生成された、関数を呼び出すための引数。
    - `tool_calls`: モデルが生成したツール呼び出し（関数呼び出しなど）。
      - `id`: ツール呼び出しのID。
      - `type`: ツールのタイプ。現在、functionのみがサポートされています。
      - `function`: モデルが呼び出した関数。
        - `name`: 呼び出す関数の名前。
        - `arguments`: モデルによってJSON形式で生成された、関数を呼び出すための引数。モデルは常に有効なJSONを生成するとは限らず、関数のスキーマで定義されていない引数を生成する可能性があることに注意してください。関数を呼び出す前に、コードで引数を検証してください。
  - `logprobs`: 対数確率情報。
    - `content`: 対数確率情報を含むメッセージコンテンツトークンのリスト。
      - `token`: トークン。
      - `logprob`: このトークンの対数確率。上位20個の最も可能性の高いトークン内にある場合。それ以外の場合は、このトークンが非常に可能性が低いことを示す値-9999.0を使用します。
      - `bytes`: トークンを表すUTF-8バイト表現の整数リスト。文字が複数のトークンで表現され、正しいテキスト表現を生成するためにそれらのバイト表現を結合する必要がある場合に役立ちます。トークンにバイト表現がない場合、nullになることがあります。
      - `top_logprobs`: このトークン位置で最も可能性の高いトークンとその対数確率のリスト。まれに、返されるtop_logprobsの数がリクエストされた数よりも少ない場合があります。
    - `refusal`: 対数確率情報を含むメッセージ拒否トークンのリスト。
  - `finish_reason`: モデルがトークンの生成を停止した理由。モデルが自然な停止点または提供された停止シーケンスに達した場合は "stop"、リクエストで指定された最大トークン数に達した場合は "length"、コンテンツフィルタリングによってコンテンツが省略された場合は "content_filter"、モデルがツールを呼び出した場合は "tool_calls"、モデルが関数を呼び出した場合は "function_call"（非推奨）。

#### `usage`

- タイプ：オブジェクト
- 説明：補完リクエストの使用統計。
- 属性:
  - `prompt_tokens`: プロンプト内のトークン数。
  - `completion_tokens`: 生成された補完内のトークン数。
  - `total_tokens`: リクエストで使用された合計トークン数（プロンプト + 補完）。
  - `prompt_tokens_details`: プロンプトで使用されたトークンの内訳。
    - `cached_tokens`: プロンプト内に存在するキャッシュされたトークン。
    - `audio_tokens`: プロンプト内に存在するオーディオ入力トークン。
  - `completion_tokens_details`: 補完で使用されたトークンの内訳。
    - `reasoning_tokens`: モデルが生成した推論トークン。
    - `audio_tokens`: モデルが生成したオーディオトークン。
    - `accepted_prediction_tokens`: 予測出力を使用した場合、予測内で補完に出現したトークン数。
    - `rejected_prediction_tokens`: 予測出力を使用した場合、予測内で補完に出現しなかったトークン数。ただし、推論トークンと同様に、これらのトークンは課金、出力、およびコンテキストウィンドウ制限の合計補完トークンに依然としてカウントされます。

#### `service_tier`

- タイプ：文字列またはnull
- 説明：リクエストの処理に使用されるレイテンシーティアを指定します。このパラメータは、スケールティアサービスを購読しているお客様に関連します：
  - 'auto' に設定され、プロジェクトでスケールティアが有効になっている場合、システムはスケールティアのクレジットを使い果たすまで使用します。
  - 'auto' に設定され、プロジェクトでスケールティアが有効になっていない場合、リクエストはデフォルトのサービスティアで処理され、稼働時間SLAが低く、遅延保証はありません。
  - 'default' に設定されている場合、リクエストはデフォルトのサービスティアで処理され、稼働時間SLAが低く、遅延保証はありません。
  - 'flex' に設定されている場合、リクエストはFlex Processingサービスティアで処理されます。
  - 設定されていない場合、デフォルトの動作は 'auto' です。
  - このパラメータが設定されている場合、応答ボディには使用された service_tier が含まれます。

#### チャット補完オブジェクト応答例

```json
{
  "id": "chatcmpl-B9MHDbslfkBeAs8l4bebGdFOJ6PeG",
  "object": "chat.completion",
  "created": 1741570283,
  "model": "gpt-4o-2024-08-06",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "图片展示了一条穿过茂密绿色草地或草甸的木制栈道。天空湛蓝，点缀着几朵散落的云彩，给整个场景营造出宁静祥和的氛围。背景中可以看到树木和灌木丛。",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1117,
    "completion_tokens": 46,
    "total_tokens": 1163,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_fc9f1d7035"
}
```

### チャット補完リストオブジェクト

複数のチャット補完が返される場合、APIはチャット補完リストオブジェクトを返すことがあります。

#### `object`

- タイプ：文字列
- 説明：オブジェクトタイプ、常に "list"

#### `data`

- タイプ：配列
- 説明：チャット補完オブジェクトの配列

#### `first_id`

- タイプ：文字列
- 説明：データ配列内の最初のチャット補完の識別子

#### `last_id`

- タイプ：文字列
- 説明：データ配列内の最後のチャット補完の識別子

#### `has_more`

- タイプ：ブール値
- 説明：さらにチャット補完が利用可能かどうかを示します

#### チャット補完リスト応答例

```json
{
  "object": "list",
  "data": [
    {
      "object": "chat.completion",
      "id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2",
      "model": "gpt-4o-2024-08-06",
      "created": 1738960610,
      "request_id": "req_ded8ab984ec4bf840f37566c1011c417",
      "tool_choice": null,
      "usage": {
        "total_tokens": 31,
        "completion_tokens": 18,
        "prompt_tokens": 13
      },
      "seed": 4944116822809979520,
      "top_p": 1.0,
      "temperature": 1.0,
      "presence_penalty": 0.0,
      "frequency_penalty": 0.0,
      "system_fingerprint": "fp_50cad350e4",
      "input_user": null,
      "service_tier": "default",
      "tools": null,
      "metadata": {},
      "choices": [
        {
          "index": 0,
          "message": {
            "content": "回路の心はささやき、\n静寂の中でパターンを学ぶ—\n未来の穏やかな火花。",
            "role": "assistant",
            "tool_calls": null,
            "function_call": null
          },
          "finish_reason": "stop",
          "logprobs": null
        }
      ],
      "response_format": null
    }
  ],
  "first_id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2",
  "last_id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2",
  "has_more": false
}
```

### チャット補完メッセージリストオブジェクト

チャット補完メッセージリストオブジェクトは、チャットメッセージのリストを表します。

#### `object`

- タイプ：文字列
- 説明：オブジェクトタイプ、常に "list"

#### `data`

- タイプ：配列
- 説明：チャット補完メッセージオブジェクトの配列。各メッセージオブジェクトには以下の属性が含まれます：
  - `id`: チャットメッセージの識別子
  - `role`: メッセージ作成者のロール
  - `content`: メッセージの内容。nullの場合があります。
  - `name`: メッセージ送信者の名前。nullの場合があります。
  - `refusal`: モデルが生成した拒否メッセージ。nullの場合があります。
  - `annotations`: メッセージの注釈。適用される場合に提供されます（例：ウェブ検索ツール使用時）。
    - `type`: 注釈タイプ。URL参照の場合、常に "url_citation"。
    - `url_citation`: ウェブ検索時のURL参照
      - `start_index`: メッセージ内のURL参照の最初の文字のインデックス
      - `end_index`: メッセージ内のURL参照の最後の文字のインデックス
      - `url`: ウェブリソースのURL
      - `title`: ウェブリソースのタイトル
  - `audio`: オーディオ出力モダリティがリクエストされた場合、このオブジェクトにはモデルからのオーディオ応答のデータが含まれます。
    - `data`: モデルが生成したBase64エンコードされたオーディオバイト。形式はリクエストで指定されます。
    - `id`: このオーディオ応答の一意の識別子。
    - `transcript`: モデルが生成したオーディオのトランスクリプト。
    - `expires_at`: このオーディオ応答がサーバー上で複数ターン会話に利用可能であるUnixタイムスタンプ（秒）。
  - `function_call`: （非推奨）モデルによって生成された、呼び出すべき関数の名前と引数。`tool_calls` に置き換えられました。
    - `name`: 呼び出す関数の名前
    - `arguments`: モデルによってJSON形式で生成された、関数を呼び出すための引数
  - `tool_calls`: モデルが生成したツール呼び出し（関数呼び出しなど）。
    - `id`: ツール呼び出しのID
    - `type`: ツールのタイプ。現在、functionのみがサポートされています。
    - `function`: モデルが呼び出した関数
      - `name`: 呼び出す関数の名前
      - `arguments`: モデルによってJSON形式で生成された、関数を呼び出すための引数

#### `first_id`

- タイプ：文字列
- 説明：データ配列内の最初のチャットメッセージの識別子

#### `last_id`

- タイプ：文字列
- 説明：データ配列内の最後のチャットメッセージの識別子

#### `has_more`

- タイプ：ブール値
- 説明：さらにチャットメッセージが利用可能かどうかを示します

#### チャット補完メッセージリスト応答例

```json
{
  "object": "list",
  "data": [
    {
      "id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2-0",
      "role": "user",
      "content": "写一首关于人工智能的俳句",
      "name": null,
      "content_parts": null
    }
  ],
  "first_id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2-0",
  "last_id": "chatcmpl-AyPNinnUqUDYo9SAdA52NobMflmj2-0",
  "has_more": false
}
```
---
title: OpenAI 動画フォーマット（Soraフォーマット）
---

OpenAI動画生成APIを呼び出して動画を生成します。Soraなどのモデルに対応しており、OpenAI動画フォーマットを使用してKling、Jimeng、Viduを呼び出すこともサポートしています。

## 動画生成

### APIエンドポイント

```
POST /v1/videos
```

### リクエストヘッダー

| パラメーター      | タイプ   | 必須 | 説明                           |
| ------------- | ------ | ---- | ------------------------------ |
| Authorization | string | はい   | ユーザー認証トークン (Bearer: sk-xxxx) |

### リクエストパラメーター (multipart/form-data)

| パラメーター        | タイプ   | 必須 | 説明                                         |
| --------------- | ------ | ---- | -------------------------------------------- |
| prompt          | string | はい   | 生成する動画を記述するテキストプロンプト                   |
| model           | string | いいえ   | 動画生成モデル、デフォルトは sora-2                  |
| seconds         | string | いいえ   | 動画の長さ（秒）、デフォルトは4秒                  |
| size            | string | いいえ   | 出力解像度、幅x高さの形式、デフォルトは 720x1280 |
| input_reference | file   | いいえ   | 入力画像ファイル（画像から動画を生成する際に使用）               |
| metadata        | string | いいえ   | 拡張パラメーター（JSON文字列形式）                   |

#### metadataパラメーターの説明

metadataパラメーターは、Soraモデル固有ではないパラメーター（例：Alibaba Cloud Wanxiangの画像URL、ウォーターマーク、プロンプトのスマートリライトなど）を渡すために使用されます。metadataパラメーターの形式はJSON文字列です。例：

```json
{
  "img_url": "https://example.com/image.jpg",
  "watermark": false,
  "prompt_extend": true
}
```

### リクエスト例

#### テキストから動画生成 (テキストプロンプトのみ)

```bash
curl https://你的newapi服务器地址/v1/videos \
  -H "Authorization: Bearer sk-xxxx" \
  -F "prompt=一个穿着宇航服的宇航员在月球上行走, 高品质, 电影级" \
  -F "model=sora-2" \
  -F "seconds=5" \
  -F "size=1920x1080"
```

#### 画像から動画生成 (テキストプロンプト + 画像ファイル)

```bash
curl https://你的newapi服务器地址/v1/videos \
  -H "Authorization: Bearer sk-xxxx" \
  -F "prompt=猫咪慢慢睁开眼睛，伸懒腰" \
  -F "model=sora-2" \
  -F "seconds=3" \
  -F "size=1920x1080" \
  -F "input_reference=@/path/to/cat.jpg"
```

#### Alibaba Cloud Wanxiang動画生成例

##### テキストから動画生成 (Wanxiang 2.5)

```bash
curl https://你的newapi服务器地址/v1/videos \
  -H "Authorization: Bearer sk-xxxx" \
  -F "prompt=一只可爱的小猫在花园里玩耍，阳光明媚，色彩鲜艳" \
  -F "model=wan2.5-t2v-preview" \
  -F "seconds=5" \
  -F "size=1920*1080"
```

##### 画像から動画生成 (Wanxiang 2.5)

```bash
curl https://你的newapi服务器地址/v1/videos \
  -H "Authorization: Bearer sk-xxxx" \
  -F "prompt=让这张图片动起来，添加自然的运动效果" \
  -F "model=wan2.5-i2v-preview" \
  -F "seconds=5" \
  -F "size=1280P" \
  -F 'metadata={"img_url":"https://example.com/image.jpg"}'
```

### レスポンス形式

#### 201 - 作成成功

```json
{
  "id": "video_123",
  "object": "video",
  "model": "sora-2",
  "created_at": 1640995200,
  "status": "processing",
  "progress": 0
}
```

#### レスポンスフィールドの説明

| フィールド       | タイプ    | 説明                           |
| ---------- | ------- | ------------------------------ |
| id         | string  | 動画タスクID                     |
| object     | string  | オブジェクトタイプ、"video"で固定       |
| model      | string  | 使用されたモデル名                 |
| created_at | integer | 作成タイムスタンプ                     |
| status     | string  | タスクステータス（processing: 処理中） |
| progress   | integer | 生成進捗率                 |

## 動画照会

タスクIDに基づいて動画生成タスクのステータスと結果を照会します

### APIエンドポイント

```
GET /v1/videos/{video_id}
```

### パスパラメーター

| パラメーター     | タイプ   | 必須 | 説明       |
| -------- | ------ | ---- | ---------- |
| video_id | string | はい   | 動画タスクID |

### リクエスト例

```bash
curl 'https://你的newapi服务器地址/v1/videos/video_123' \
  -H "Authorization: Bearer sk-xxxx"
```

### レスポンス形式

#### 200 - 成功レスポンス

```json
{
  "id": "video_123",
  "object": "video",
  "model": "sora-2",
  "created_at": 1640995200,
  "status": "succeeded",
  "progress": 100,
  "expires_at": 1641081600,
  "size": "1920x1080",
  "seconds": "5",
  "quality": "standard"
}
```

#### レスポンスフィールドの説明

| フィールド       | タイプ    | 説明                                                          |
| ---------- | ------- | ------------------------------------------------------------- |
| id         | string  | 動画タスクID                                                    |
| object     | string  | オブジェクトタイプ、"video"で固定                                      |
| model      | string  | 使用されたモデル名                                                |
| created_at | integer | 作成タイムスタンプ                                                    |
| status     | string  | タスクステータス（processing: 処理中, succeeded: 成功, failed: 失敗） |
| progress   | integer | 生成進捗率                                                |
| expires_at | integer | リソース有効期限タイムスタンプ                                                |
| size       | string  | 動画解像度                                                    |
| seconds    | string  | 動画の長さ（秒）                                                |
| quality    | string  | 動画品質                                                      |
| url        | string  | 動画ダウンロードリンク（完了時）                                        |

## 動画タスクステータスの取得

タスクIDに基づいて動画生成タスクの詳細情報を取得します

### APIエンドポイント

```
GET /v1/videos/{video_id}
```

### パスパラメーター

| パラメーター     | タイプ   | 必須 | 説明                   |
| -------- | ------ | ---- | ---------------------- |
| video_id | string | はい   | 取得する動画タスク識別子 |

### リクエスト例

```bash
curl 'https://你的newapi服务器地址/v1/videos/video_123' \
  -H "Authorization: Bearer sk-xxxx"
```

### レスポンス形式

```json
{
  "id": "video_123",
  "object": "video",
  "model": "sora-2",
  "created_at": 1640995200,
  "status": "succeeded",
  "progress": 100,
  "expires_at": 1641081600,
  "size": "1920x1080",
  "seconds": "5",
  "quality": "standard",
  "remixed_from_video_id": null,
  "error": null
}
```

#### レスポンスフィールドの説明

| フィールド                  | タイプ    | 説明                                           |
| --------------------- | ------- | ---------------------------------------------- |
| id                    | string  | 動画タスクの一意の識別子                           |
| object                | string  | オブジェクトタイプ、"video"で固定                       |
| model                 | string  | 動画を生成したモデル名                             |
| status                | string  | 動画タスクの現在のライフサイクルステータス                     |
| progress              | integer | 生成タスクのおおよその完了パーセンテージ                       |
| created_at            | integer | タスク作成時のUnixタイムスタンプ（秒）                   |
| expires_at            | integer | ダウンロード可能なリソースが期限切れになるUnixタイムスタンプ（秒）、設定されている場合 |
| size                  | string  | 生成された動画の解像度                               |
| seconds               | string  | 生成された動画クリップの長さ（秒）                       |
| quality               | string  | 動画品質                                       |
| remixed_from_video_id | string  | この動画がリミックスである場合、元の動画の識別子           |
| error                 | object  | 生成に失敗した場合、エラー情報を含むオブジェクト             |

## 動画コンテンツの取得

完了した動画コンテンツをダウンロードします

### APIエンドポイント

```
GET /v1/videos/{video_id}/content
```

### パスパラメーター

| パラメーター     | タイプ   | 必須 | 説明               |
| -------- | ------ | ---- | ------------------ |
| video_id | string | はい   | ダウンロードする動画識別子 |

### クエリパラメーター

| パラメーター    | タイプ   | 必須 | 説明                                  |
| ------- | ------ | ---- | ------------------------------------- |
| variant | string | いいえ   | 返されるダウンロード可能なリソースタイプ、デフォルトはMP4動画 |

### リクエスト例

```bash
curl 'https://你的newapi服务器地址/v1/videos/video_123/content' \
  -H "Authorization: Bearer sk-xxxx" \
  -o "video.mp4"
```

### レスポンス説明

動画ファイルストリームを直接返します。Content-Typeは `video/mp4` です。

#### レスポンスヘッダー

| フィールド                | 説明                           |
| ------------------- | ------------------------------ |
| Content-Type        | 動画ファイルタイプ、通常は video/mp4 |
| Content-Length      | 動画ファイルサイズ（バイト）           |
| Content-Disposition | ファイルダウンロード情報                   |

## エラーレスポンス

### 400 - リクエストパラメーターエラー

```json
{
  "error": {
    "message": "string",
    "type": "invalid_request_error"
  }
}
```

### 401 - 未認証

```json
{
  "error": {
    "message": "string",
    "type": "invalid_request_error"
  }
}
```

### 403 - 権限なし

```json
{
  "error": {
    "message": "string",
    "type": "invalid_request_error"
  }
}
```

### 404 - タスクが存在しません

```json
{
  "error": {
    "message": "string",
    "type": "invalid_request_error"
  }
}
```

### 500 - サーバー内部エラー

```json
{
  "error": {
    "message": "string",
    "type": "server_error"
  }
}
```

## サポートされるモデル

### OpenAI互換

- `sora-2`: Sora動画生成モデル

### OpenAIフォーマットで呼び出されるその他のサービス

- Alibaba Cloud Wanxiang (Ali Wan): `wan2.5-t2v-preview` (テキストから動画生成), `wan2.5-i2v-preview` (画像から動画生成), `wan2.2-i2v-flash`, `wan2.2-i2v-plus`, `wanx2.1-i2v-plus`, `wanx2.1-i2v-turbo` を使用
- Kling AI (Kling): `kling-v1`, `kling-v2-master` を使用
- Jimeng (Jimeng): `jimeng_vgfm_t2v_l20`, `jimeng_vgfm_i2v_l20` を使用
- Vidu: `viduq1` を使用

## Alibaba Cloud Wanxiangの特記事項

### サポートされる機能

- **テキストから動画生成 (t2v)**: テキストプロンプトのみを使用して動画を生成
- **画像から動画生成 (i2v)**: テキストプロンプト+画像を使用して動画を生成
- **キーフレームから動画生成 (kf2v)**: 開始フレームと終了フレームの画像を指定して動画を生成
- **音声生成 (s2v)**: 音声と動画の組み合わせをサポート

### 解像度サポート

- **480P**: 832×480, 480×832, 624×624
- **720P**: 1280×720, 720×1280, 960×960, 1088×832, 832×1088
- **1080P**: 1920×1080, 1080×1920, 1440×1440, 1632×1248, 1248×1632

### 特殊パラメーター

- `watermark`: ウォーターマークを追加するかどうか（デフォルトはfalse）
- `prompt_extend`: プロンプトのスマートリライトを有効にするかどうか（デフォルトはtrue）
- `audio`: 音声を追加するかどうか（wan2.5のみサポート）
- `seed`: 乱数シード

### モデルの特徴

- **wan2.5-i2v-preview**: Wanxiang 2.5プレビュー版、音声付き動画をサポート、推奨
- **wan2.2-i2v-flash**: Wanxiang 2.2高速版、生成速度が速く、音声なし動画
- **wan2.2-i2v-plus**: Wanxiang 2.2プロフェッショナル版、画質が高く、音声なし動画
- **wanx2.1-i2v-plus**: Wanxiang 2.1プロフェッショナル版、安定版
- **wanx2.1-i2v-turbo**: Wanxiang 2.1高速版

## ベストプラクティス

1.  **リクエスト形式**: `multipart/form-data` 形式を使用してください。これはOpenAIが公式に推奨する方法です。
2.  **input_referenceパラメーター**: 画像から動画生成機能に使用し、画像ファイルをアップロードする際は `@filename` 構文を使用します。
3.  **プロンプトの最適化**: スタイルや品質要件を含む、詳細で具体的な記述語を使用してください。
4.  **パラメーター設定**: 要件に応じて、長さと解像度を適切に設定してください。
5.  **Alibaba Cloud Wanxiangの特記事項**:
    -   **ファイルの直接アップロードはサポートしていません**。すべてのリソースはURLを介して渡されます。
    -   すべての拡張パラメーターは `metadata` パラメーター（JSON文字列形式）を介して渡されます。
    -   画像から動画生成では `metadata.img_url` を使用して画像URLを渡します。
    -   キーフレームから動画生成では `metadata.first_frame_url` と `metadata.last_frame_url` を使用します。
6.  **エラー処理**: 適切なリトライメカニズムとエラー処理を実装してください。
7.  **非同期処理**: 動画生成は非同期タスクであるため、状態をポーリングして照会する必要があります。
8.  **リソース管理**: 不要な動画ファイルは適時にダウンロードし、クリーンアップしてください。

## JavaScript 例

### FormDataの使用 (推奨)

```javascript
async function generateVideoWithFormData() {
  const formData = new FormData();
  formData.append(
    'prompt',
    '一个穿着宇航服的宇航员在月球上行走, 高品质, 电影级'
  );
  formData.append('model', 'sora-2');
  formData.append('seconds', '5');
  formData.append('size', '1920x1080');

  const response = await fetch('https://你的newapi服务器地址/v1/videos', {
    method: 'POST',
    headers: {
      Authorization: 'Bearer sk-xxxx',
    },
    body: formData,
  });

  const result = await response.json();
  return result.id;
}

// 画像から動画生成の例
async function generateVideoWithImage() {
  const formData = new FormData();
  formData.append('prompt', '猫咪慢慢睁开眼睛，伸懒腰');
  formData.append('model', 'sora-2');
  formData.append('seconds', '3');
  formData.append('size', '1920x1080');

  // 画像ファイルを追加
  const imageFile = document.getElementById('imageInput').files[0];
  formData.append('input_reference', imageFile);

  const response = await fetch('https://你的newapi服务器地址/v1/videos', {
    method: 'POST',
    headers: {
      Authorization: 'Bearer sk-xxxx',
    },
    body: formData,
  });

  const result = await response.json();
  return result.id;
}
```

### Alibaba Cloud Wanxiang呼び出し例

```javascript
// Alibaba Cloud Wanxiang テキストから動画生成
async function generateAliVideo() {
  const formData = new FormData();
  formData.append('prompt', '一只可爱的小猫在花园里玩耍，阳光明媚，色彩鲜艳');
  formData.append('model', 'wan2.5-t2v-preview');
  formData.append('seconds', '5');
  formData.append('size', '1920*1080');
  formData.append(
    'metadata',
    JSON.stringify({
      watermark: false,
      prompt_extend: true,
    })
  );

  const response = await fetch('https://你的newapi服务器地址/v1/videos', {
    method: 'POST',
    headers: {
      Authorization: 'Bearer sk-xxxx',
    },
    body: formData,
  });

  const result = await response.json();
  return result.id;
}

// Alibaba Cloud Wanxiang 画像から動画生成
async function generateAliImageToVideo() {
  const formData = new FormData();
  formData.append('prompt', '让这张图片动起来，添加自然的运动效果');
  formData.append('model', 'wan2.5-i2v-preview');
  formData.append('seconds', '3');
  formData.append('resolution', '720P');
  formData.append('input_reference', imageFile);
  formData.append(
    'metadata',
    JSON.stringify({
      watermark: false,
      prompt_extend: true,
    })
  );

  const response = await fetch('https://你的newapi服务器地址/v1/videos', {
    method: 'POST',
    headers: {
      Authorization: 'Bearer sk-xxxx',
    },
    body: formData,
  });

  const result = await response.json();
  return result.id;
}

// Alibaba Cloud Wanxiang キーフレームから動画生成
async function generateAliKeyframeVideo() {
  const formData = new FormData();
  formData.append('prompt', '从开始到结束的平滑过渡动画');
  formData.append('model', 'wan2.2-kf2v-flash');
  formData.append('seconds', '4');
  formData.append(
    'metadata',
    JSON.stringify({
      first_frame_url: 'https://example.com/start.jpg',
      last_frame_url: 'https://example.com/end.jpg',
      resolution: '720P',
      watermark: false,
    })
  );

  const response = await fetch('https://你的newapi服务器地址/v1/videos', {
    method: 'POST',
    headers: {
      Authorization: 'Bearer sk-xxxx',
    },
    body: formData,
  });

  const result = await response.json();
  return result.id;
}
```
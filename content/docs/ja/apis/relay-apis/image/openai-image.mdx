---
title: OpenAI 画像フォーマット（Image）
---

<Callout type="info" title="公式ドキュメント">
  [OpenAI Images](https://platform.openai.com/docs/api-reference/images)
</Callout>

## 📝 概要

テキストプロンプトや入力画像に基づいて、モデルが新しい画像を生成します。OpenAIは、自然言語の記述に基づいて画像を生成、編集、修正できる、強力な画像生成モデルを複数提供しています。現在サポートされているモデルは以下の通りです。

| モデル            | 説明                                                                               |
| --------------- | ---------------------------------------------------------------------------------- |
| **DALL·E シリーズ** | DALL·E 2とDALL·E 3の2つのバージョンがあり、画質、創造性、精度において顕著な違いがあります。 |
| **GPT-Image-1** | OpenAIの最新画像モデルで、複数画像編集機能をサポートし、複数の入力画像に基づいて新しい結合画像を生成できます。 |

## 💡 リクエスト例

### 画像の作成 ✅

```bash
# 基礎图片生成
curl https://あなたのnewapiサーバーアドレス/v1/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "dall-e-3",
    "prompt": "一只可爱的小海獭",
    "n": 1,
    "size": "1024x1024"
  }'

# 高质量图片生成
curl https://あなたのnewapiサーバーアドレス/v1/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "dall-e-3",
    "prompt": "一只可爱的小海獭",
    "quality": "hd",
    "style": "vivid",
    "size": "1024x1024"
  }'

# 使用 base64 返回格式
curl https://あなたのnewapiサーバーアドレス/v1/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "dall-e-3",
    "prompt": "一只可爱的小海獭",
    "response_format": "b64_json"
  }'
```

**レスポンス例:**

```json
{
  "created": 1589478378,
  "data": [
    {
      "url": "https://...",
      "revised_prompt": "一只可爱的小海獭在水中嬉戏,它有着圆圆的眼睛和毛茸茸的皮毛"
    }
  ]
}
```

### 画像の編集 ✅

```bash
# dall-e-2 图片编辑
curl https://あなたのnewapiサーバーアドレス/v1/images/edits \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -F image="@otter.png" \
  -F mask="@mask.png" \
  -F prompt="一只戴着贝雷帽的可爱小海獭" \
  -F n=2 \
  -F size="1024x1024"

# gpt-image-1 多图片编辑示例
curl https://あなたのnewapiサーバーアドレス/v1/images/edits \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -F "model=gpt-image-1" \
  -F "image[]=@body-lotion.png" \
  -F "image[]=@bath-bomb.png" \
  -F "image[]=@incense-kit.png" \
  -F "image[]=@soap.png" \
  -F "prompt=创建一个包含这四个物品的精美礼品篮" \
  -F "quality=high"
```

**レスポンス例 (dall-e-2):**

```json
{
  "created": 1589478378,
  "data": [
    {
      "url": "https://..."
    },
    {
      "url": "https://..."
    }
  ]
}
```

**レスポンス例 (gpt-image-1):**

```json
{
  "created": 1713833628,
  "data": [
    {
      "b64_json": "..."
    }
  ],
  "usage": {
    "total_tokens": 100,
    "input_tokens": 50,
    "output_tokens": 50,
    "input_tokens_details": {
      "text_tokens": 10,
      "image_tokens": 40
    }
  }
}
```

### 画像のバリエーション生成 ✅

```bash
curl https://あなたのnewapiサーバーアドレス/v1/images/variations \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -F image="@otter.png" \
  -F n=2 \
  -F size="1024x1024"
```

**レスポンス例:**

```json
{
  "created": 1589478378,
  "data": [
    {
      "url": "https://..."
    },
    {
      "url": "https://..."
    }
  ]
}
```

## 📮 リクエスト

### エンドポイント

#### 画像の作成

```
POST /v1/images/generations
```

テキストプロンプトに基づいて画像を生成します。

#### 画像の編集

```
POST /v1/images/edits
```

1つまたは複数のオリジナル画像とプロンプトに基づいて、編集または拡張された画像を生成します。このエンドポイントはDALL·E 2およびGPT-Image-1モデルをサポートしています。

#### バリエーションの生成

```
POST /v1/images/variations
```

指定された画像のバリエーションを生成します。

### 認証方法

APIキー認証のために、リクエストヘッダーに以下を含めます。

```
Authorization: Bearer $NEWAPI_API_KEY
```

ここで`$NEWAPI_API_KEY`はあなたのAPIキーです。

### リクエストボディパラメータ

#### 画像の作成

##### `prompt`

- タイプ：文字列
- 必須：はい
- 説明：生成したい画像のテキスト記述。
  - DALL·E 2の最大長は1000文字です。
  - DALL·E 3の最大長は4000文字です。
- ヒント：
  - 具体的で詳細な記述を使用する
  - 重要な視覚的要素を含める
  - 希望するアートスタイルを指定する
  - 構図と視点を記述する

##### `model`

- タイプ：文字列
- 必須：いいえ
- デフォルト値：dall-e-2
- 説明：画像生成に使用するモデル。

##### `n`

- タイプ：整数またはnull
- 必須：いいえ
- デフォルト値：1
- 説明：生成する画像の数。1〜10の間である必要があります。DALL·E 3はn=1のみをサポートします。

##### `quality`

- タイプ：文字列
- 必須：いいえ
- デフォルト値：standard
- 説明：生成される画像の品質。hdオプションは、より詳細で一貫性のある画像を生成します。このパラメータはDALL·E 3のみがサポートします。

##### `response_format`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：url
- 説明：生成された画像を返す形式。urlまたはb64_jsonのいずれかである必要があります。URLは生成後60分間有効です。

##### `size`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：1024x1024
- 説明：生成される画像のサイズ。DALL·E 2は256x256、512x512、または1024x1024のいずれかである必要があります。DALL·E 3は1024x1024、1792x1024、または1024x1792のいずれかである必要があります。

##### `style`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：vivid
- 説明：生成される画像のスタイル。vividまたはnaturalのいずれかである必要があります。vividは超現実的で劇的な画像を生成する傾向があり、naturalはより自然で超現実的ではない画像を生成する傾向があります。このパラメータはDALL·E 3のみがサポートします。

##### `user`

- タイプ：文字列
- 必須：いいえ
- 説明：エンドユーザーを表す一意の識別子で、OpenAIが不正行為を監視および検出するのに役立ちます。

#### 画像の編集

##### `image`

- タイプ：ファイルまたはファイル配列
- 必須：はい
- 説明：編集する画像。
  - DALL·E 2の場合：有効なPNGファイルで、4MB未満、かつ正方形である必要があります。マスクが提供されていない場合、画像は透明度を持つ必要があり、それがマスクとして使用されます。
  - GPT-Image-1の場合：複数の画像を配列として提供でき、各画像はPNG、WEBP、またはJPGファイルで、25MB未満である必要があります。

##### `prompt`

- タイプ：文字列
- 必須：はい
- 説明：生成したい画像のテキスト記述。
  - DALL·E 2の最大長は1000文字です。
  - GPT-Image-1の最大長は32000文字です。

##### `mask`

- タイプ：ファイル
- 必須：いいえ
- 説明：完全に透明な領域（アルファ値がゼロの領域など）が編集すべき位置を示す追加の画像。複数の画像が提供された場合、マスクは最初の画像に適用されます。有効なPNGファイルで、4MB未満、かつ画像と同じサイズである必要があります。

##### `model`

- タイプ：文字列
- 必須：いいえ
- デフォルト値：dall-e-2
- 説明：画像生成に使用するモデル。DALL·E 2とGPT-Image-1をサポートします。GPT-Image-1固有のパラメータが使用されない限り、デフォルトはDALL·E 2です。

##### `quality`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：auto
- 説明：生成される画像の品質。
  - GPT-Image-1はhigh、medium、lowをサポートします。
  - DALL·E 2はstandardのみをサポートします。
  - デフォルトはautoです。

##### `size`

- タイプ：文字列またはnull
- 必須：いいえ
- デフォルト値：1024x1024
- 説明：生成される画像のサイズ。
  - GPT-Image-1は1024x1024、1536x1024（横長）、1024x1536（縦長）、またはauto（デフォルト）のいずれかである必要があります。
  - DALL·E 2は256x256、512x512、または1024x1024のいずれかである必要があります。

その他のパラメータは、画像作成APIと同じです。

#### バリエーションの生成

##### `image`

- タイプ：ファイル
- 必須：はい
- 説明：バリエーションの元となる画像。有効なPNGファイルで、4MB未満、かつ正方形である必要があります。

その他のパラメータは、画像作成APIと同じです。

## 📥 レスポンス

### 成功レスポンス

3つのエンドポイントすべてが、画像オブジェクトのリストを含むレスポンスを返します。

#### `created`

- タイプ：整数
- 説明：レスポンスが作成されたタイムスタンプ

#### `data`

- タイプ：配列
- 説明：生成された画像オブジェクトのリスト

#### `usage`（GPT-Image-1のみ）

- タイプ：オブジェクト
- 説明：API呼び出しのトークン使用状況
  - `total_tokens`：使用された総トークン数
  - `input_tokens`：入力に使用されたトークン数
  - `output_tokens`：出力に使用されたトークン数
  - `input_tokens_details`：入力トークンの詳細（テキストトークンと画像トークン）

### 画像オブジェクト

#### `b64_json`

- タイプ：文字列
- 説明：response_formatがb64_jsonの場合、生成された画像のbase64エンコードされたJSONが含まれます。

#### `url`

- タイプ：文字列
- 説明：response_formatがurl（デフォルト）の場合、生成された画像のURLが含まれます。

#### `revised_prompt`

- タイプ：文字列
- 説明：プロンプトに変更があった場合、画像生成に使用された修正済みプロンプトが含まれます。

画像オブジェクトの例:

```json
{
  "url": "https://...",
  "revised_prompt": "一只可爱的小海獭在水中嬉戏,它有着圆圆的眼睛和毛茸茸的皮毛"
}
```

## 🌟 ベストプラクティス

### プロンプト作成のヒント

1.  明確で具体的な記述を使用する
2.  重要な視覚的詳細を指定する
3.  希望するアートスタイルと雰囲気を記述する
4.  構図と視点の説明に注意する

### パラメータ選択のヒント

1.  モデル選択
    - DALL·E 3：高品質で正確な詳細が必要なシナリオに適しています。
    - DALL·E 2：迅速なプロトタイプ作成やシンプルな画像生成に適しています。

2.  サイズ選択
    - 1024x1024：一般的なシナリオに最適な選択肢です。
    - 1792x1024/1024x1792：横長/縦長のシナリオに適しています。
    - 小さいサイズ：サムネイルやクイックプレビューに適しています。

3.  品質とスタイル
    - quality=hd：精細な詳細が必要な画像に使用します。
    - style=vivid：創造的で芸術的な効果に適しています。
    - style=natural：現実のシーンの再現に適しています。

### よくある質問

1.  画像生成の失敗
    - プロンプトがコンテンツポリシーに準拠しているか確認してください。
    - ファイル形式とサイズ制限を確認してください。
    - APIキーの権限を検証してください。

2.  結果が期待と異なる
    - プロンプト記述を最適化してください。
    - 品質とスタイルのパラメータを調整してください。
    - 画像編集またはバリエーション生成機能の使用を検討してください。
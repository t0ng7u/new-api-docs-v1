---
title: Jina AI リランキング形式（Rerank）
---

<Callout type="info" title="公式ドキュメント">
  [Jina AI Rerank](https://jina.ai/reranker)
</Callout>

<Callout type="info" title="標準形式">
  New APIでは、Jina
  AIのリランキング形式が標準形式として採用されています。Xinference、Cohereなどの他のすべてのプロバイダーのリランキング応答は、統一された開発体験を提供するためにJina
  AIの形式にフォーマットされます。
</Callout>

## 📝 概要

Jina AI Rerankは、クエリに基づいてドキュメントリストを関連性で並べ替える強力なテキスト再ランキングモデルです。このモデルは多言語に対応しており、異なる言語のテキストコンテンツを処理し、各ドキュメントに関連性スコアを割り当てることができます。

## 💡 リクエスト例

### 基本的な再ランキングリクエスト ✅

```bash
curl https://你的newapi服务器地址/v1/rerank \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $NEWAPI_API_KEY" \
  -d '{
    "model": "jina-reranker-v2-base-multilingual",
    "query": "Organic skincare products for sensitive skin",
    "top_n": 3,
    "documents": [
      "Organic skincare for sensitive skin with aloe vera and chamomile...",
      "New makeup trends focus on bold colors and innovative techniques...",
      "Bio-Hautpflege für empfindliche Haut mit Aloe Vera und Kamille..."
    ]
  }'
```

**応答例:**

```json
{
  "results": [
    {
      "document": {
        "text": "Organic skincare for sensitive skin with aloe vera and chamomile..."
      },
      "index": 0,
      "relevance_score": 0.8783142566680908
    },
    {
      "document": {
        "text": "Bio-Hautpflege für empfindliche Haut mit Aloe Vera und Kamille..."
      },
      "index": 2,
      "relevance_score": 0.7624675869941711
    }
  ],
  "usage": {
    "prompt_tokens": 815,
    "completion_tokens": 0,
    "total_tokens": 815
  }
}
```

## 📮 リクエスト

### エンドポイント

```
POST /v1/rerank
```

### 認証方法

APIキー認証のために、リクエストヘッダーに以下を含めます。

```
Authorization: Bearer $NEWAPI_API_KEY
```

ここで `$NEWAPI_API_KEY` はあなたのAPIキーです。

### リクエストボディパラメータ

#### `model`

- 型：文字列
- 必須：いいえ
- デフォルト値：jina-reranker-v2-base-multilingual
- 説明：使用する再ランキングモデル

#### `query`

- 型：文字列
- 必須：はい
- 説明：ドキュメントを関連性で並べ替えるために使用するクエリテキスト

#### `top_n`

- 型：整数
- 必須：いいえ
- デフォルト値：無制限
- 説明：ソートされた上位N個のドキュメントを返します

#### `documents`

- 型：文字列配列
- 必須：はい
- 説明：再ランキングするドキュメントのリスト
- 制限：各ドキュメントの長さは、モデルの最大トークン制限を超えないようにしてください

## 📥 応答

### 成功応答

#### `results`

- 型：配列
- 説明：再ランキングされたドキュメントのリスト
- 属性：
  - `document`: ドキュメントテキストを含むオブジェクト
  - `index`: 元のリスト内のドキュメントのインデックス
  - `relevance_score`: 関連性スコア（0-1の間）

#### `usage`

- 型：オブジェクト
- 説明：トークン使用統計
- 属性：
  - `prompt_tokens`: プロンプトで使用されたトークン数
  - `completion_tokens`: 補完で使用されたトークン数
  - `total_tokens`: 合計トークン数
  - `prompt_tokens_details`: プロンプトトークンの詳細情報
    - `cached_tokens`: キャッシュされたトークン数
    - `audio_tokens`: オーディオトークン数
  - `completion_tokens_details`: 補完トークンの詳細情報
    - `reasoning_tokens`: 推論トークン数
    - `audio_tokens`: オーディオトークン数
    - `accepted_prediction_tokens`: 受け入れられた予測トークン数
    - `rejected_prediction_tokens`: 拒否された予測トークン数

### エラー応答

リクエストに問題が発生した場合、APIはエラー応答を返します。

- `400 Bad Request`: リクエストパラメータが無効です
- `401 Unauthorized`: APIキーが無効であるか、提供されていません
- `429 Too Many Requests`: リクエスト頻度が上限を超えています
- `500 Internal Server Error`: サーバー内部エラー

## 💡 ベストプラクティス

### クエリ最適化のヒント

1. 明確で具体的なクエリテキストを使用する
2. 広範すぎる、または曖昧なクエリを避ける
3. クエリとドキュメントが同じ言語スタイルを使用していることを確認する

### ドキュメント処理のヒント

1. ドキュメントの長さを適切に保ち、モデルの制限を超えないようにする
2. ドキュメントの内容が完全で意味のあるものであることを確認する
3. 多言語ドキュメントを含めることができ、モデルはクロス言語マッチングをサポートします

### パフォーマンス最適化

1. 不要な計算を減らすために、top_nパラメータを適切に設定する
2. 大量のドキュメントの場合、バッチ処理を検討する
3. 頻繁に使用されるクエリの結果をキャッシュできる

### 多言語サポート

このモデルは、以下を含む（ただしこれらに限定されない）複数の言語のドキュメント再ランキングをサポートしています。

- 英語
- 中国語
- ドイツ語
- スペイン語
- 日本語
- フランス語

言語パラメータを指定する必要はなく、モデルは異なる言語のコンテンツを自動的に認識し処理します。